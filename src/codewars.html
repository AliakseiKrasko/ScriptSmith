<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User Data</title>
    <style>
        .user-card {
            border: 1px solid #ccc;
            padding: 15px;
            margin: 10px;
            border-radius: 5px;
        }
        .error {
            color: red;
            font-weight: bold;
        }
        .loading {
            color: blue;
        }
    </style>
</head>
<body>
<div id="app">
    <h1>Users List</h1>
    <div id="loading" class="loading">Loading users...</div>
    <div id="users-container"></div>
    <div id="error" class="error" style="display: none;"></div>
</div>

<script>
    // Элементы DOM
    const loadingElement = document.getElementById('loading');
    const usersContainer = document.getElementById('users-container');
    const errorElement = document.getElementById('error');

    // Функция для получения пользователей
    async function fetchUsers() {
        try {
            const response = await fetch('https://jsonplaceholder.typicode.com/users');

            if (!response.ok) {
                throw new Error(`HTTP error: ${response.status}`);
            }

            const users = await response.json();
            return users;

        } catch (error) {
            console.error('Fetch error:', error);
            // Показываем ошибку пользователю
            errorElement.textContent = `Error loading users: ${error.message}`;
            errorElement.style.display = 'block';
            throw error; // Пробрасываем ошибку дальше
        }
    }

    // Функция для отображения пользователей
    function displayUsers(users) {
        loadingElement.style.display = 'none';

        if (users.length === 0) {
            usersContainer.innerHTML = '<p>No users found</p>';
            return;
        }

        usersContainer.innerHTML = users.map(user => `
                <div class="user-card">
                    <h3>${user.name}</h3>
                    <p><strong>Email:</strong> ${user.email}</p>
                    <p><strong>Phone:</strong> ${user.phone}</p>
                    <p><strong>Company:</strong> ${user.company.name}</p>
                    <p><strong>Website:</strong> ${user.website}</p>
                </div>
            `).join('');
    }

    // Основная функция инициализации
    async function init() {
        try {
            const users = await fetchUsers();
            displayUsers(users);
        } catch (error) {
            loadingElement.style.display = 'none';
            console.error('Initialization error:', error);
        }
    }

    // Запускаем при загрузке страницы
    document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>